(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{108:function(e,t,o){"use strict";var r=o(5),n=o(935),a=o(384),i=o(942);var s=function(){switch(r.f()){case"graphicstock":return n.a;case"videoblocks":return i.a;case"audioblocks":return a.a;default:return null}}();t.a=s},130:function(e,t,o){"use strict";o.d(t,"a",(function(){return v}));var r=o(1),n=o.n(r),a=o(0),i=o.n(a),s=o(3),c=o.n(s);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var v=function(e){function t(){return u(this,t),d(this,m(t).apply(this,arguments))}var o,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),o=t,(r=[{key:"render",value:function(){return this.props.title?this.renderWithTitle(this.props.title):this.renderPlain()}},{key:"renderPlain",value:function(){var e=this.props,t=e.compact,o=e.show,r=c()(["la-loading-indicator","la-ball-newton-cradle","la-2x","la-delayed"],{"la-compact":t});return o?i.a.createElement("div",{className:r},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)):null}},{key:"renderWithTitle",value:function(e){return i.a.createElement("div",{className:"la-loading-indicator"},i.a.createElement("div",{className:"la-ball-newton-cradle la-2x la-delayed"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)),i.a.createElement("h3",null,e))}}])&&p(o.prototype,r),n&&p(o,n),t}(a.PureComponent);f(v,"propTypes",{title:n.a.string,compact:n.a.bool,show:n.a.bool}),f(v,"defaultProps",{compact:!1,show:!0})},143:function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var r=o(0),n=o.n(r),a=o(1);o(636);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var m=function(e){function t(){return s(this,t),l(this,u(t).apply(this,arguments))}var o,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),o=t,(r=[{key:"render",value:function(){return this.props.showNewFlag?n.a.createElement("div",{className:"StockItemIcons"},n.a.createElement("span",{className:"StockItemIcons-newFlag"},"NEW")):null}}])&&c(o.prototype,r),a&&c(o,a),t}(r.Component);d(m,"propTypes",{showNewFlag:a.bool}),d(m,"defaultProps",{showNewFlag:!1})},1642:function(e,t,o){},532:function(e,t,o){"use strict";var r=o(1),n=o.n(r),a=o(0),i=o.n(a),s=o(161),c=o.n(s),l=o(33),u=o.n(l),p=o(6),d=o(11);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k,b,I,S=function(e){function t(){return h(this,t),v(this,y(t).apply(this,arguments))}var o,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),o=t,(r=[{key:"render",value:function(){var e=this.getPrimaryButtonActionClass(),t=this.getDownloadLink(),o=this.getDownloadLink(),r="btn-primary "+e,n="btn-secondary";return this.props.inCstTest&&(n=this.props.cstPopupModalClassName),i.a.createElement("div",{className:"item-buttons"},this.renderButton(r,this.props.onPrimaryActionClicked,t,this.getPrimaryButtonIcon(),this.getPrimaryButtonLabel(),d.c.cardDownload),this.renderButton(n,this.props.onSecondaryActionClicked,o,"fa fa-times",this.getSecondaryButtonLabel(),d.c.cardAddToFolder))}},{key:"renderButton",value:function(e,t,o,r,n,a){var s=i.a.createElement(c.a,{id:"tooltip-"+r},n),l=r?i.a.createElement("i",{className:r}):i.a.createElement(p.i,{className:"download-icon"});return i.a.createElement(u.a,{placement:"top",overlay:s,container:this},i.a.createElement("a",{className:e,onClick:t,href:o,"data-promo-context":a},l))}},{key:"getPrimaryButtonIcon",value:function(){if(this.props.showLoadingIndicator)return"fa fa-spinner fa-spin"}},{key:"getPrimaryButtonLabel",value:function(){return"Download"}},{key:"getSecondaryButtonLabel",value:function(){return this.props.showCancelLabel?"Cancel":"Add to Folder"}},{key:"getPrimaryButtonActionClass",value:function(){return this.props.redirectToSignUpLink?"":"download-trigger"}},{key:"getDownloadLink",value:function(){return this.props.redirectToSignUpLink?"/join/register?pre_email_click=search"+"&stock_item_id=".concat(this.props.stockItemId):this.props.detailsUrl}}])&&f(o.prototype,r),n&&f(o,n),t}(a.Component);k=S,b="propTypes",I={isEnterpriseMember:n.a.bool.isRequired,onPrimaryActionClicked:n.a.func.isRequired,onSecondaryActionClicked:n.a.func.isRequired,showCancelLabel:n.a.bool.isRequired,showLoadingIndicator:n.a.bool.isRequired,redirectToSignUpLink:n.a.bool,detailsUrl:n.a.string,stockItemId:n.a.number,selectedFormat:n.a.object},b in k?Object.defineProperty(k,b,{value:I,enumerable:!0,configurable:!0,writable:!0}):k[b]=I,t.a=S},533:function(e,t,o){"use strict";var r=o(1),n=o.n(r),a=o(0),i=o.n(a),s=o(3),c=o.n(s),l=o(162);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v,y,g,k=function(e){function t(){return p(this,t),m(this,h(t).apply(this,arguments))}var o,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),o=t,(r=[{key:"render",value:function(){var e=c()({"download-format-selector":!0,view:this.props.isVisible}),t=c()({"download-formats":!0,"download-formats-long":this.props.stockItemFormats.length>2});return i.a.createElement("div",{className:e},i.a.createElement("div",{className:t},i.a.createElement("strong",null,this.getTitle(),":"),this.renderFormatsList()))}},{key:"renderFormatsList",value:function(){var e=this;return this.props.stockItemFormats.map((function(t){return i.a.createElement("div",{className:"download-format-option",key:t.id},i.a.createElement("input",{id:"stockItemFormat"+t.id,type:"radio",value:t.id,checked:e.props.selectedFormatId==t.id,onChange:function(t){return e.props.selectedFormatChanged(parseInt(t.currentTarget.value,10))},"data-extension":t.fileExtension||""}),i.a.createElement("label",{htmlFor:"stockItemFormat"+t.id},e.getTitleForStockFormat(t)))}))}},{key:"getTitle",value:function(){return"Choose a format"}},{key:"getTitleForStockFormat",value:function(e){var t=e.label;return e.codec&&(t+=" (".concat(e.codec,")")),"".concat(t," - ").concat(e.filesize)}}])&&d(o.prototype,r),n&&d(o,n),t}(a.Component);v=k,y="propTypes",g={isVisible:n.a.bool.isRequired,stockItemFormats:n.a.arrayOf(l.a.stockItemFormat).isRequired,selectedFormatId:n.a.number.isRequired,selectedFormatChanged:n.a.func.isRequired,downloadPermissions:n.a.object,member:n.a.object},y in v?Object.defineProperty(v,y,{value:g,enumerable:!0,configurable:!0,writable:!0}):v[y]=g,t.a=k},636:function(e,t,o){},935:function(e,t,o){"use strict";(function(e){var r=o(0),n=o.n(r),a=o(1),i=o.n(a),s=o(2),c=o(3),l=o.n(c),u=o(33),p=o.n(u),d=o(161),m=o.n(d),h=o(36),f=o.n(h),v=o(6),y=o(64),g=o(26),k=o(16),b=o(160),I=o(377),S=o(532),w=o(18),C=o(533),O=o(12),E=o(143),F=o(378),D=o(162),T=o(938),P=o(97),L=o(159),N=o(50),j=o(13),A=o(379),R=o(303);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?x(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var q=function(t){function o(){var e,t;_(this,o);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Z(x(t=B(this,(e=M(o)).call.apply(e,[this].concat(n)))),"state",{isDragging:!1,isHovering:!1,isHoveringOverFavorite:!1,imgOrientationCSSClass:"hidden-no-aspect-ratio"}),Z(x(t),"handleIsHovering",(function(){t.props.formatSelectorVisible||(t.setState({isHovering:!0,hoverStartTime:Date.now()}),t.props.page&&t.props.dispatch(Object(O.n)(t.props.page,t.props.stockItem.id)))})),Z(x(t),"handleIsNotHovering",(function(){t.setState({isHovering:!1,playStartTime:null}),t.logHoverDone()})),Z(x(t),"onSelectCheckboxClick",(function(){t.props.dispatch(Object(O.k)(t.props))})),Z(x(t),"handleSelectedFormatChanged",(function(e){t.props.dispatch(Object(O.i)({id:t.props.stockItem.id,selectedFormatId:e}))})),Z(x(t),"handleOnTouchEnd",(function(){if(!t.state.isDragging){var e=t.props.stockItem.detailsUrl;window.location.href=e}})),Z(x(t),"handleHoveringOverFavorite",(function(){t.setState({isHoveringOverFavorite:!0})})),Z(x(t),"handleNotHoveringOverFavorite",(function(){t.setState({isHoveringOverFavorite:!1})})),Z(x(t),"logSecondaryClickAction",(function(){k.a.logStockItemClickEvent("Stock Item Card","Click On Favorite",t.props.stockItem,t.props.stockItemCardContext)})),Z(x(t),"setImgOrientationIfNecessary",(function(){if(!t.stockItemHasAspectRatio()){var e=t.refs.previewImage;if(e&&e.complete&&e.clientHeight&&e.clientWidth){var o=e.clientWidth/e.clientHeight;t.setState({imgOrientationCSSClass:o<=1?"portrait":"landscape"})}}})),Z(x(t),"getSimilarContentAction",(function(){if(t.props.drawerIsOpen&&t.props.drawerSelectedItemId===t.props.stockItem.id)t.props.dispatch(Object(O.d)());else{k.a.logStockItemClickEvent("CollapsedContent","Search",t.props.stockItem,t.props.stockItemCardContext);var e=t.props.stockItem,o=e.collapsedSetId,r=e.id,n={collapsedSetId:o,id:r,excludeStockItemIds:t.props.stockItem.id,page:1},a=t.props.selectedSearchFilterOptions.update(n);t.props.dispatch(Object(O.f)(a)),t.props.dispatch(Object(O.e)(r))}})),t}var r,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(o,t),r=o,(a=[{key:"componentDidMount",value:function(){var t=this,o=this;this.containerRef.addEventListener("touchmove",(function(){t.state.isDragging||o.setState({isDragging:!0})})),this.containerRef.addEventListener("touchstart",(function(){t.state.isDragging&&o.setState({isDragging:!1})})),window.addEventListener("addToBin",this.addToBinHandler.bind(this)),Object(F.a)(this.containerRef,(function(){var e=t.props.stockItemCardContext||{};k.a.logStockItemDisplayEvent(t.props.stockItem,t.props.stockItemCardContext),e.position&&A.a.push(R.a.displayedStockItem(t.props.stockItem,e.position))})),this.setImgOrientationIfNecessary(),this.props.scrollTo&&this.containerRef&&e((function(){setTimeout((function(){t.containerRef&&t.containerRef.scrollIntoView&&t.containerRef.scrollIntoView({block:"center",behavior:"smooth"})}),2e3)}))}},{key:"addToBinHandler",value:function(e){e.detail.stockItemId===this.props.stockItem.id&&(this.props.dispatch(Object(g.b)({stockItemId:this.props.stockItem.id,context:this.props.context,source:"card"})),this.props.dispatch(Object(w.g)()))}},{key:"render",value:function(){var e=this,t=this.props,o=t.stockItem,r=t.stockItemFormats,a=t.style;return n.a.createElement("section",{className:this.getContainerClassNames(),"data-num-format-options":r.length,"data-stock-id":o.id,ref:function(t){return e.containerRef=t},onMouseEnter:this.handleIsHovering,onMouseLeave:this.handleIsNotHovering,style:a},this.props.draggableCard?n.a.createElement(T.a,{stockItemId:this.props.stockItem.id,dropOntoHandler:this.props.dropOntoHandler},this.renderCardContent()):this.renderCardContent())}},{key:"renderCardContent",value:function(){return this.props.isCollapsedStockItemLoadMoreCard?this.renderCollapsedStockItemLoadMoreCard():this.renderNormalStockItemCard()}},{key:"renderCollapsedStockItemLoadMoreCard",value:function(){var e=this.props,t=(e.stockItem,e.shouldStockItemHaveNewFlag);return n.a.createElement("div",{onClick:this.props.handleLoadingMoreCollapsedStockItems},n.a.createElement("div",{className:this.getThumbnailClasses()},n.a.createElement(E.a,{showNewFlag:t}),n.a.createElement("img",{className:"img-responsive progress-background thumbnail-img shrinking main-img",src:this.props.stockItem.thumbnailUrl,alt:this.props.stockItem.title})),n.a.createElement("h4",{className:"faded-thumbnail-text"},"Load More"))}},{key:"getThumbnailClasses",value:function(){return l()({box:!0,thumbnail:!0,faded:this.props.isCollapsedStockItemLoadMoreCard,"load-more":this.props.isCollapsedStockItemLoadMoreCard})}},{key:"renderNormalStockItemCard",value:function(){var e=this.props,t=e.stockItem,o=e.minimize,r=e.shouldStockItemHaveNewFlag;return n.a.createElement("div",{className:"box top-level-li","data-stock-id":t.id},n.a.createElement("div",{className:"thumbnail-img-wrapper"},n.a.createElement(E.a,{showNewFlag:r}),this.renderStockItemFormatSelector(),this.renderSelectCheckbox(),this.renderActionButtons(),this.getDetailLink()),o?null:this.renderButtons(),this.shouldShowCollapsedContentUI()&&this.renderBurstEffect())}},{key:"renderSelectCheckbox",value:function(){if(this.props.context&&this.props.context.startsWith("Folder-"))return n.a.createElement("input",{type:"checkbox",className:"select-checkbox",onChange:this.onSelectCheckboxClick,checked:!!this.props.checked})}},{key:"renderStockItemFormatSelector",value:function(){var e=this;if(this.props.formatSelectorVisible){var t=this.props,o=t.formatSelectorVisible,r=(t.stockItem,t.stockItemFormats),a=t.selectedFormatId,i=t.member;return n.a.createElement(C.a,{isVisible:o,stockItemFormats:r,selectedFormatId:a,selectedFormatChanged:function(t){return e.handleSelectedFormatChanged(t)},member:i})}}},{key:"getContainerClassNames",value:function(){return l()(this.props.containerResponsiveClassNames,this.props.classNames,{"stock-item-v2":!0,"stock-item":!0,"is-selected":this.props.isSelected,"download-format-selector-visible":this.props.formatSelectorVisible,"hidden-sm":this.props.hideOnThreeColumnLayout,"hidden-md":this.props.hideOnThreeColumnLayout,"collapsed-card":this.shouldShowCollapsedContentUI()})}},{key:"getDetailLink",value:function(){var e=this.props.imgClassNames.concat(["main-img",this.state.imgOrientationCSSClass]);return n.a.createElement("a",{className:"image-link",href:this.props.stockItem.detailsUrl,onClick:function(){},onTouchEnd:this.handleOnTouchEnd},this.props.lazyLoad?n.a.createElement(y.LazyImage,{src:this.getThumbnailImageUrl(),lqip:this.getLowQualityPlaceholder(),alt:this.props.stockItem.title,classes:e,onLoad:this.setImgOrientationIfNecessary,ref:"previewImage"}):n.a.createElement("img",{src:this.getThumbnailImageUrl(),alt:this.props.stockItem.title,className:l()(e),onLoad:this.setImgOrientationIfNecessary,ref:"previewImage"}))}},{key:"getLowQualityPlaceholder",value:function(){return"/assets/common/images/lqip-gray-box.svg"}},{key:"renderButtons",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"controls item-title"},this.props.formatSelectorVisible&&this.renderDownloadButtons()))}},{key:"renderDownloadButtons",value:function(){return n.a.createElement(S.a,{onPrimaryActionClicked:this.getPrimaryClickAction(),onSecondaryActionClicked:this.hideDownloadButtons(),showCancelLabel:this.props.formatSelectorVisible,redirectToSignUpLink:this.props.redirectToSignUpLink,detailsUrl:this.props.stockItem.detailsUrl,stockItemId:this.props.stockItem.id,isEnterpriseMember:this.props.isEnterpriseMember,selectedFormat:this.getSelectedFormat()})}},{key:"hideDownloadButtons",value:function(){var e=this;return function(t){t.preventDefault(),e.props.dispatch(Object(O.i)({formatSelectorVisible:!1})),e.setState({isHovering:!0})}}},{key:"renderActionButtons",value:function(){return this.state.isHovering?n.a.createElement("div",{className:"action-buttons"},this.getDownloadButton(),this.getFavoriteButton(),this.shouldShowCollapsedContentUI()&&this.getSimilarButton()):null}},{key:"getDownloadButton",value:function(){var e=this.props,t=(e.stockItem,e.shouldShowDownloadButton);if(e.stockItemFormats,!1!==t){var o=n.a.createElement(m.a,{id:"tooltip-download",onMouseEnter:this.handleIsHovering},this.isASubscriptionlessUser()?"Download Preview":"Download");return n.a.createElement(p.a,{placement:"left",overlay:o},n.a.createElement("div",{className:"action-wrapper download-button action-download",onClick:this.getPrimaryClickAction()},n.a.createElement(v.i,{color:"#FFF"})))}}},{key:"isASubscriptionlessUser",value:function(){return this.props.user.isLoggedIn&&!this.props.user.subscription}},{key:"getFavoriteButton",value:function(){if(!1!==this.props.shouldShowAddToFavorites){var e=n.a.createElement(m.a,{id:"tooltip-favorite",onMouseEnter:this.handleIsHovering},"Favorite");return this.props.useSubscriptionlessSignUpEnticement?n.a.createElement(P.a,{onClick:function(){return j.Telemetry.increment("favorite.clicked.search")}},{clickToOpen:n.a.createElement(p.a,{placement:"left",overlay:e},n.a.createElement("img",{className:"stock-item-v2-standalone-favorite-icon",src:__ASSETS_COMMON_IMAGES_URL__+"/icons/stock-item-cards/sb-favorite-outline.svg"})),opensOnClick:n.a.createElement(L.a,{stockItemId:this.props.stockItem.id})}):n.a.createElement(p.a,{placement:"left",overlay:e},n.a.createElement("div",{className:"action-wrapper",onMouseEnter:this.handleHoveringOverFavorite,onMouseLeave:this.handleNotHoveringOverFavorite},n.a.createElement(I.a,{stockItemId:this.props.stockItem.id,stockItem:this.props.stockItem,stockItemFormats:this.props.stockItemFormats,context:this.props.context,onIsHovering:this.handleIsHovering,onIsNotHovering:this.handleIsNotHovering,logEventHandler:this.logSecondaryClickAction,isInSharedFoldersBeta:this.props.isInSharedFoldersBeta})))}}},{key:"getSimilarButton",value:function(){var e=n.a.createElement(m.a,{id:"tooltip-expand",onMouseEnter:this.handleIsHovering},"More Like This");return n.a.createElement(p.a,{placement:"left",overlay:e,defaultOverlayShown:this.shouldShowMoreLikeThisTooltipByDefault()},n.a.createElement("div",{className:"action-wrapper similar-button"},n.a.createElement("img",{onClick:this.getSimilarContentAction,src:"/assets/common/images/icons/stock-item-cards/sb-image-similar.svg"})))}},{key:"shouldShowMoreLikeThisTooltipByDefault",value:function(){var e=f.a.load("morelikethis"),t=window&&window.location&&"."+window.location.hostname;return!e&&(f.a.save("morelikethis",!0,{path:"/",domain:t}),!0)}},{key:"stockItemHasAspectRatio",value:function(){var e=this.props.stockItem;return"aspectRatio"in e&&e.aspectRatio}},{key:"useSmallerThumbnailImage",value:function(){return this.stockItemHasAspectRatio()&&this.props.stockItem.aspectRatio<2}},{key:"getThumbnailImageUrl",value:function(){return this.props.stockItem.thumbnailUrl&&this.props.stockItem.smallPreviewUrl?this.useSmallerThumbnailImage()?this.props.stockItem.thumbnailUrl:this.props.stockItem.smallPreviewUrl:this.props.stockItem.smallPreviewUrl||this.props.stockItem.thumbnailUrl}},{key:"getPrimaryClickAction",value:function(){var e=this;if(this.isASubscriptionlessUser()){var t=Object(N.b)(this.props.stockItem.id,N.e);return function(){j.Telemetry.increment("preview.downloaded.stockItemCard"),t()}}return this.getRedirectPage()?function(t){t.preventDefault(),e.logPrimaryClickAction(),window.location.href=e.getRedirectPage()}:this.getDefaultPrimaryClickAction()}},{key:"getDefaultPrimaryClickAction",value:function(){var e=this;return function(t){if(e.logPrimaryClickAction(),!e.overrideClickActionsForRedirect())if(t.preventDefault(),!e.props.formatSelectorVisible&&e.props.stockItemFormats.length>=2)e.primaryActionUpdateSelectedStockItemOption();else{var o=e.getSelectedFormat();e.primaryActionDownloadItem(o)}}}},{key:"getSelectedFormat",value:function(){var e=this;return this.props.stockItemFormats.length>=2?this.props.stockItemFormats.find((function(t){return t.id===e.props.selectedFormatId})):this.props.stockItemFormats[0]}},{key:"overrideClickActionsForRedirect",value:function(){return this.props.redirectToSignUpLink}},{key:"primaryActionUpdateSelectedStockItemOption",value:function(){this.setState({isHovering:!1}),this.props.dispatch(Object(O.i)({id:this.props.stockItem.id,formatSelectorVisible:!0,selectedFormatId:this.props.stockItemFormats[0].id}))}},{key:"logPrimaryClickAction",value:function(){k.a.logStockItemClickEvent("Stock Item Card","Click On Download",this.props.stockItem,this.props.stockItemCardContext)}},{key:"primaryActionDownloadItem",value:function(e){j.Telemetry.increment("download.clicked.stockItemCard"),b.a.getInstance().downloadItem(e.downloadUrl,e.downloadAjaxUrl,this.props.searchLogParameters,this.props.dispatch,this.plansAndPricingUpgradeAvailable())}},{key:"getRedirectPage",value:function(){var e=null;return this.props.user.subscription||(e=this.props.stockItem.detailsUrl),e}},{key:"logHoverDone",value:function(){if(this.state.hoverStartTime){var e={hoverDuration:Date.now()-this.state.hoverStartTime};k.a.logStockItemHoverEvent(this.props.stockItem,this.props.stockItemCardContext,e)}}},{key:"plansAndPricingUpgradeAvailable",value:function(){return!!this.props.plansAndPricingUpgradeInfo}},{key:"renderBurstEffect",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"first-shadow"}),n.a.createElement("div",{className:"second-shadow"}))}},{key:"shouldShowCollapsedContentUI",value:function(){return this.props.stockItem.numCollapses>2&&"search"===this.props.context}}])&&H(r.prototype,a),i&&H(r,i),o}(r.Component);Z(q,"propTypes",{stockItem:D.a.stockItem,stockItemFormats:i.a.arrayOf(D.a.stockItemFormat).isRequired,isSelected:i.a.bool,searchLogParameters:i.a.object,minimize:i.a.bool,containerResponsiveClassNames:i.a.arrayOf(i.a.string),hideOnThreeColumnLayout:i.a.bool,style:i.a.object,classNames:i.a.arrayOf(i.a.string),imgClassNames:i.a.arrayOf(i.a.string),isEnterpriseMember:i.a.bool,shouldShowAddToFavorites:i.a.bool,checked:i.a.bool,onSelectCheckboxClick:i.a.func,page:i.a.number,context:i.a.string,stockItemCardContext:i.a.object,member:i.a.object,user:i.a.object,shouldStockItemHaveNewFlag:i.a.bool,isCollapsedStockItemLoadMoreCard:i.a.bool,handleLoadingMoreCollapsedStockItems:i.a.func,shouldShowDownloadButton:i.a.bool,draggableCard:i.a.bool,dropOntoHandler:i.a.func,isInSharedFoldersBeta:i.a.bool,lazyLoad:i.a.bool,useSubscriptionlessSignUpEnticement:i.a.bool}),Z(q,"defaultProps",{containerResponsiveClassNames:["col-lg-3 ","col-md-4 ","col-sm-4 ","col-xs-10 ","col-xs-offset-1 ","col-lg-offset-0 ","col-md-offset-0 ","col-sm-offset-0"],style:{},classNames:[],imgClassNames:[],isCollapsedStockItemLoadMore:!1,handleCollapsedItemsLoadMore:{},draggableCard:!1,isInSharedFoldersBeta:!1,lazyLoad:!0}),t.a=Object(s.connect)((function(e,t){var o=e.app.search,r=o.selectedStockItem,n=r.id===t.stockItem.id;return{formatSelectorVisible:!!n&&r.formatSelectorVisible,selectedFormatId:n?r.selectedFormatId:-1,selectedSearchFilterOptions:o.selectedSearchFilterOptions,signUpLink:o.features.signUpLink,redirectToSignUpLink:o.features.redirectToSignUpLink,bmtTestSegmentName:o.features.bmtTestSegmentName,plansAndPricingUpgradeInfo:e.popUps.instanceSpecificInfo.plansAndPricingUpgradeInfo,bins:e.memberBins.bins,member:o.member,drawerIsOpen:o.drawerIsOpen,drawerSelectedItemId:o.drawerSelectedItemId,user:e.auth,isInSharedFoldersBeta:e.memberBins.isInSharedFoldersBeta}}))(q)}).call(this,o(7))},938:function(e,t,o){"use strict";var r=o(0),n=o.n(r),a=o(1),i=o.n(a);o(1642);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?d(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var f=function(e){function t(){var e,o;c(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return h(d(o=u(this,(e=p(t)).call.apply(e,[this].concat(n)))),"state",{hoverLeftDropZone:0,hoverRightDropZone:0}),o}var o,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),o=t,(r=[{key:"render",value:function(){return n.a.createElement("div",{className:"draggableStockItemCardOverlay",draggable:!0,onDragStart:this.loadEventDataWithDragee()},n.a.createElement("div",{className:"draggableStockItemCardOverlay-dropToLeftZone",onDragOver:this.preventDefaultOnDragOver(),onDragEnter:this.hoverOverLeftDropZone(),onDragLeave:this.unhoverOverLeftDropZone(),onDrop:this.handleReorderingDrop(!0)}),n.a.createElement("div",{className:"draggableStockItemCardOverlay-dropToRightZone",onDragOver:this.preventDefaultOnDragOver(),onDragEnter:this.hoverOverRightDropZone(),onDragLeave:this.unhoverOverRightDropZone(),onDrop:this.handleReorderingDrop(!1)}),this.state.hoverLeftDropZone>0?this.renderLeftInsertLine():null,this.state.hoverRightDropZone>0?this.renderRightInsertLine():null,this.props.children)}},{key:"loadEventDataWithDragee",value:function(){var e=this;return function(t){t.dataTransfer.setData("text/plain",e.props.stockItemId)}}},{key:"handleReorderingDrop",value:function(e){var t=this;return function(o){t.setState({hoverLeftDropZone:0,hoverRightDropZone:0});var r=parseInt(o.dataTransfer.getData("text"));t.props.dropOntoHandler(r,t.props.stockItemId,e)}}},{key:"hoverOverLeftDropZone",value:function(){var e=this;return function(){e.setState({hoverLeftDropZone:e.state.hoverLeftDropZone+1})}}},{key:"unhoverOverLeftDropZone",value:function(){var e=this;return function(){e.setState({hoverLeftDropZone:e.state.hoverLeftDropZone-1})}}},{key:"hoverOverRightDropZone",value:function(){var e=this;return function(){e.setState({hoverRightDropZone:e.state.hoverRightDropZone+1})}}},{key:"unhoverOverRightDropZone",value:function(){var e=this;return function(){e.setState({hoverRightDropZone:e.state.hoverRightDropZone-1})}}},{key:"preventDefaultOnDragOver",value:function(){return function(e){e.preventDefault()}}},{key:"renderLeftInsertLine",value:function(){return n.a.createElement("div",{className:"draggableStockItemCardOverlay-insertLeftLine"})}},{key:"renderRightInsertLine",value:function(){return n.a.createElement("div",{className:"draggableStockItemCardOverlay-insertRightLine"})}}])&&l(o.prototype,r),a&&l(o,a),t}(r.Component);h(f,"propTypes",{stockItemId:i.a.number,dropOntoHandler:i.a.func}),t.a=f},942:function(e,t,o){"use strict";(function(e){var r=o(0),n=o.n(r),a=o(1),i=o.n(a),s=o(2),c=o(3),l=o.n(c),u=o(6),p=o(143),d=o(130),m=o(26),h=o(160),f=o(16),v=o(377),y=o(18),g=o(204),k=o(33),b=o.n(k),I=o(161),S=o.n(I),w=o(532),C=o(12),O=o(36),E=o.n(O),F=o(943),D=o(378),T=o(162),P=o(97),L=o(159),N=o(50),j=o(13),A=(o(523),o(38)),R=o(944),U=o(27),_=o(303),H=o(379);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?q(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var G=function(t){function o(){var e,t;M(this,o);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return z(q(t=V(this,(e=Z(o)).call.apply(e,[this].concat(a)))),"state",{isDragging:!1,isHovering:!1,isPlaying:!1,isHoveringOverFavorite:!1,accumulatedPlayMs:0}),z(q(t),"videoRef",Object(r.createRef)()),z(q(t),"handleMouseEnter",(function(){t.handleIsHovering(),t.play()})),z(q(t),"handleIsHovering",(function(){t.props.formatSelectorVisible||(t.setState({isHovering:!0,hoverStartTime:Date.now()}),t.props.page&&t.props.dispatch(Object(C.n)(t.props.page,t.props.stockItem.id)))})),z(q(t),"handleStockItemClick",(function(e){"VIDEO"===e.target.nodeName&&t.logHoverDone()})),z(q(t),"handleMouseLeave",(function(e){e.relatedTarget&&e.relatedTarget.className&&e.relatedTarget.className.includes("tooltip")||(t.handleIsNotHovering(),t.pause())})),z(q(t),"handleIsNotHovering",(function(){t.setState({isHovering:!1,playStartTime:null,accumulatedPlayMs:t.state.accumulatedPlayMs+t.playDurationMs()}),t.logHoverDone()})),z(q(t),"handleSelectedFormatChanged",(function(e){t.props.dispatch(Object(C.i)({id:t.props.stockItem.id,selectedFormatId:e}))})),z(q(t),"handleVideoStartedPlaying",(function(){t.setState({isPlaying:!0,playStartTime:t.state.playStartTime||Date.now()})})),z(q(t),"handleOnTouchEnd",(function(){if(!t.state.isDragging){var e=t.props.stockItem.detailsUrl;window.location.href=e}})),z(q(t),"getSimilarContentAction",(function(){if(t.props.drawerIsOpen&&t.props.drawerSelectedItemId===t.props.stockItem.id)t.props.dispatch(Object(C.d)());else{f.a.logStockItemClickEvent("CollapsedContent","Search",t.props.stockItem,t.props.stockItemCardContext);var e=t.props.stockItem,o=e.collapsedSetId,r=e.id,n={collapsedSetId:o,id:r,excludeStockItemIds:t.props.stockItem.id,page:1},a=t.props.selectedSearchFilterOptions.update(n);t.props.dispatch(Object(C.f)(a)),t.props.dispatch(Object(C.e)(r))}})),z(q(t),"handleHoveringOverFavorite",(function(){t.setState({isHoveringOverFavorite:!0})})),z(q(t),"handleNotHoveringOverFavorite",(function(){t.setState({isHoveringOverFavorite:!1})})),z(q(t),"deleteFromFolder",(function(){t.props.dispatch(Object(U.b)(t.props.binUniqueId,[t.props.stockItem.id]))})),z(q(t),"logSecondaryClickAction",(function(){f.a.logStockItemClickEvent("Stock Item Card","Click On Favorite",t.props.stockItem,t.props.stockItemCardContext)})),t}var a,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(o,t),a=o,(i=[{key:"componentDidMount",value:function(){var t=this,o=this;this.containerRef.addEventListener("touchmove",(function(){t.state.isDragging||o.setState({isDragging:!0})})),this.containerRef.addEventListener("touchstart",(function(){t.state.isDragging&&o.setState({isDragging:!1})})),window.addEventListener("addToBin",this.addToBinHandler.bind(this)),Object(D.a)(this.containerRef,(function(){var e=t.props.stockItemCardContext||{};f.a.logStockItemDisplayEvent(t.props.stockItem,t.props.stockItemCardContext),e.position&&H.a.push(_.a.displayedStockItem(t.props.stockItem,e.position))})),this.props.scrollTo&&this.containerRef&&e((function(){setTimeout((function(){t.containerRef&&t.containerRef.scrollIntoView&&t.containerRef.scrollIntoView({block:"center",behavior:"smooth"})}),500)}))}},{key:"addToBinHandler",value:function(e){e.detail.stockItemId===this.props.stockItem.id&&(this.props.dispatch(Object(m.b)({stockItemId:this.props.stockItem.id,context:this.props.context,source:"card"})),this.props.dispatch(Object(y.g)()))}},{key:"render",value:function(){var e=this;return n.a.createElement("section",{className:this.getContainerClassNames(),"data-stock-id":this.props.stockItem.id,ref:function(t){return e.containerRef=t},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleStockItemClick,style:this.props.style},this.renderCard())}},{key:"renderCard",value:function(){return this.props.isCollapsedStockItemLoadMoreCard?this.renderCollapsedStockItemLoadMoreCard():this.renderNormalStockItemCard()}},{key:"renderCollapsedStockItemLoadMoreCard",value:function(){var e=this.props,t=e.handleLoadingMoreCollapsedStockItems,o=e.shouldStockItemHaveNewFlag,r=e.stockItem;return n.a.createElement("div",{onClick:t},n.a.createElement("div",{className:this.getThumbnailClasses()},n.a.createElement(p.a,{showNewFlag:o}),n.a.createElement("img",{className:"thumbnail-img",src:r.thumbnailUrl,alt:r.title}),n.a.createElement("div",null,n.a.createElement("div",{className:"controls"},n.a.createElement("div",{className:"item-title"},this.renderStockItemTitle())))),n.a.createElement("h4",{className:"faded-thumbnail-text"},"Load More"))}},{key:"renderNormalStockItemCard",value:function(){var e=this.props,t=(e.stockItem,e.shouldStockItemHaveNewFlag),o=e.minimize;return n.a.createElement("div",{className:this.getThumbnailClasses()},n.a.createElement("div",{className:"thumbnail-img-wrapper"},this.renderStockItemFormatSelector(),n.a.createElement(p.a,{showNewFlag:t}),this.renderActionButtons(),this.props.draggableCard?this.renderVideo():this.renderVideoWithDetailsLink(),n.a.createElement(d.a,{show:this.state.isHovering&&!this.state.isPlaying})),!o&&this.renderButtons(),this.shouldShowCollapsedContentUI()&&this.renderBurstEffect())}},{key:"play",value:function(){var e=this;if(this.videoRef&&this.videoRef.current){var t=this.videoRef.current.videoRef.current.play();t&&t.then((function(){})).catch((function(t){t instanceof DOMException&&"AbortError"===t.name||(e.state.isHovering&&e.videoRef.current.videoRef.current.play(),console.error("Playback exception: ",{name:t.name,errorType:t}))}))}}},{key:"pause",value:function(){this.videoRef&&this.videoRef.current&&this.videoRef.current.pause()}},{key:"getThumbnailClasses",value:function(){return l()({box:!0,thumbnail:!0,faded:this.props.isCollapsedStockItemLoadMoreCard,"load-more":this.props.isCollapsedStockItemLoadMoreCard})}},{key:"renderStockItemFormatSelector",value:function(){var e=this;if(this.props.formatSelectorVisible)return n.a.createElement(F.a,{isVisible:this.props.formatSelectorVisible,stockItemFormats:this.props.stockItemFormats,selectedFormatId:this.props.selectedFormatId,selectedFormatChanged:function(t){return e.handleSelectedFormatChanged(t)},downloadPermissions:this.props.downloadPermissions,member:this.props.member})}},{key:"renderActionButtons",value:function(){return this.state.isHovering?n.a.createElement("div",{className:"action-buttons"},this.getDownloadButton(),this.getFavoriteButton(),this.getDeleteButton(),this.shouldShowCollapsedContentUI()&&this.getSimilarButton()):null}},{key:"renderButtons",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"controls"},n.a.createElement("div",{className:"item-title"},this.renderStockItemTitle()),this.props.formatSelectorVisible&&this.renderDownloadButtons()))}},{key:"renderDownloadButtons",value:function(){if(!1!==this.props.shouldShowDownloadButton)return n.a.createElement(w.a,{onPrimaryActionClicked:this.getPrimaryClickAction(),onSecondaryActionClicked:this.hideDownloadButtons(),showCancelLabel:this.props.formatSelectorVisible,redirectToSignUpLink:this.props.redirectToSignUpLink,detailsUrl:this.props.stockItem.detailsUrl,stockItemId:this.props.stockItem.id,isEnterpriseMember:this.props.isEnterpriseMember,selectedFormat:this.getSelectedFormat()})}},{key:"hideDownloadButtons",value:function(){var e=this;return function(t){t.preventDefault(),e.props.dispatch(Object(C.i)({formatSelectorVisible:!1})),e.setState({isHovering:!0})}}},{key:"renderStockItemTitle",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,this.props.stockItem.title),this.props.stockItem.duration?n.a.createElement(g.a,{seconds:this.props.stockItem.duration}):null)}},{key:"renderBurstEffect",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"first-shadow"}),n.a.createElement("div",{className:"second-shadow"}))}},{key:"shouldShowCollapsedContentUI",value:function(){return this.props.stockItem.numCollapses>2&&"search"===this.props.context}},{key:"playDurationMs",value:function(){return this.state.playStartTime?Date.now()-this.state.playStartTime:0}},{key:"logHoverDone",value:function(){if(this.state.hoverStartTime){var e=Date.now()-this.state.hoverStartTime,t=this.state.playStartTime?Date.now()-this.state.playStartTime:0,o=this.videoRef.current.videoRef.current.currentTime,r=this.state.accumulatedPlayMs+this.playDurationMs(),n=Math.floor(r/1e3/this.props.stockItem.duration),a=new R.a.create(this.props.stockItem,this.state.hoverStartTime,this.state.playStartTime,o,n,r);e>1e3&&A.a.produce(a,a.user.visitorCookieId);var i={hoverDuration:e,playDuration:t,timesLooped:n};f.a.logStockItemHoverEvent(this.props.stockItem,this.props.stockItemCardContext,i)}}},{key:"primaryActionDownloadItem",value:function(e){j.Telemetry.increment("download.clicked.stockItemCard"),h.a.getInstance().downloadItem(e.downloadUrl,e.downloadAjaxUrl,this.props.searchLogParameters,this.props.dispatch,this.plansAndPricingUpgradeAvailable())}},{key:"renderVideoWithDetailsLink",value:function(){return n.a.createElement("a",{className:"image-link",href:this.props.stockItem.detailsUrl,onClick:function(){},onTouchEnd:this.handleOnTouchEnd},this.renderVideo())}},{key:"renderVideo",value:function(){var e=this.props.stockItem;return n.a.createElement(u.s,{ref:this.videoRef,videoUrl:e.previewUrl,poster:e.thumbnailUrl,onStartedPlaying:this.handleVideoStartedPlaying,autoPlay:!1,preload:!1,mute:!0})}},{key:"getPrimaryClickAction",value:function(){var e=this,t=this.props,o=t.member,r=t.stockItem;if(this.isASubscriptionlessUser()){var n=Object(N.b)(r.id,N.e);return function(){j.Telemetry.increment("preview.downloaded.stockItemCard"),n()}}if(o&&r&&!this.props.user.subscription){var a=this.props.stockItem.detailsUrl;return function(t){t.preventDefault(),e.logPrimaryClickAction(),f.a.logClickEvent("Plans & Pricing","Click on Download"),window.location.href=a}}return this.getDefaultPrimaryClickAction()}},{key:"getDefaultPrimaryClickAction",value:function(){var e=this;return function(t){if(e.logPrimaryClickAction(),!e.overrideClickActionsForRedirect())if(t.preventDefault(),!e.props.formatSelectorVisible&&e.props.stockItemFormats.length>=2)e.primaryActionUpdateSelectedStockItemOption();else{var o=e.getSelectedFormat();e.primaryActionDownloadItem(o)}}}},{key:"getSelectedFormat",value:function(){var e=this;return this.props.stockItemFormats.length>=2&&-1!==this.props.selectedFormatId?this.props.stockItemFormats.find((function(t){return t.id===e.props.selectedFormatId})):this.props.stockItemFormats[0]}},{key:"overrideClickActionsForRedirect",value:function(){return this.props.redirectToSignUpLink}},{key:"primaryActionUpdateSelectedStockItemOption",value:function(){this.setState({isHovering:!1,isPlaying:!1}),this.props.dispatch(Object(C.i)({id:this.props.stockItem.id,formatSelectorVisible:!0,selectedFormatId:this.props.stockItemFormats[0].id}))}},{key:"logPrimaryClickAction",value:function(){f.a.logStockItemClickEvent("Stock Item Card","Click On Download",this.props.stockItem,this.props.stockItemCardContext),this.logHoverDone()}},{key:"plansAndPricingUpgradeAvailable",value:function(){return!!this.props.plansAndPricingUpgradeInfo}},{key:"getContainerClassNames",value:function(){return l()(this.props.containerResponsiveClassNames,this.props.classNames,{"stock-item":!0,"stock-item-v2":!0,"is-selected":this.props.isSelected,"download-format-selector-visible":this.props.formatSelectorVisible,"hidden-sm":this.props.hideOnThreeColumnLayout,"hidden-md":this.props.hideOnThreeColumnLayout,"collapsed-card":this.shouldShowCollapsedContentUI()})}},{key:"getDownloadButton",value:function(){if(!1!==this.props.shouldShowDownloadButton){var e=n.a.createElement(S.a,{id:"tooltip-download",onMouseEnter:this.handleIsHovering},this.isASubscriptionlessUser()?"Download Preview":"Download");return n.a.createElement("div",{className:this.getDownloadButtonClass(),onClick:this.getPrimaryClickAction()},n.a.createElement(b.a,{placement:"left",overlay:e},n.a.createElement(u.i,{color:"#FFF"})))}}},{key:"isASubscriptionlessUser",value:function(){return this.props.user.isLoggedIn&&!this.props.user.subscription}},{key:"getDownloadButtonClass",value:function(){return"action-wrapper download-button action-download"}},{key:"getFavoriteButton",value:function(){if(!1!==this.props.shouldShowAddToFavorites){var e=n.a.createElement(S.a,{id:"tooltip-favorite",onMouseEnter:this.handleIsHovering},"Favorite");return this.props.useSubscriptionlessSignUpEnticement?n.a.createElement(P.a,{onClick:function(){return j.Telemetry.increment("favorite.clicked.search")}},{clickToOpen:n.a.createElement(b.a,{placement:"left",overlay:e},n.a.createElement("img",{className:"stock-item-v2-standalone-favorite-icon",src:"/assets/common/images/icons/stock-item-cards/sb-favorite-outline.svg"})),opensOnClick:n.a.createElement(L.a,{stockItemId:this.props.stockItem.id})}):n.a.createElement(b.a,{placement:"left",overlay:e},n.a.createElement("div",{className:"action-wrapper favorite-symbol"},n.a.createElement(v.a,{stockItemId:this.props.stockItem.id,stockItem:this.props.stockItem,stockItemFormats:this.props.stockItemFormats,context:this.props.context,onIsHovering:this.handleIsHovering,onIsNotHovering:this.handleIsNotHovering,logEventHandler:this.logSecondaryClickAction,isInSharedFoldersBeta:this.props.isInSharedFoldersBeta})))}}},{key:"getDeleteButton",value:function(){if(!1!==this.props.shouldShowDeleteButton){var e=n.a.createElement(S.a,{id:"tooltip-favorite",onMouseEnter:this.handleIsHovering},"Delete From Folder");return n.a.createElement(b.a,{placement:"left",overlay:e},n.a.createElement("div",{className:"action-wrapper favorite-symbol"},n.a.createElement("img",{src:__ASSETS_COMMON_IMAGES_URL__+"/member/folders/trash_with_padding.svg",className:"stockItemCard-deleteButton",onClick:this.deleteFromFolder})))}}},{key:"getSimilarButton",value:function(){var e=n.a.createElement(S.a,{id:"tooltip-download",onMouseEnter:this.handleIsHovering},"More Like This");return n.a.createElement(b.a,{placement:"left",overlay:e,defaultOverlayShown:this.shouldShowMoreLikeThisTooltipByDefault()},n.a.createElement("div",{className:"action-wrapper similar-button"},n.a.createElement("img",{onClick:this.getSimilarContentAction,src:"/assets/common/images/icons/stock-item-cards/sb-video-similar.svg"})))}},{key:"shouldShowMoreLikeThisTooltipByDefault",value:function(){var e=E.a.load("morelikethis"),t=window&&window.location&&"."+window.location.hostname;return!e&&(E.a.save("morelikethis",!0,{path:"/",domain:t}),!0)}}])&&x(a.prototype,i),s&&x(a,s),o}(r.Component);z(G,"propTypes",{stockItem:T.a.stockItem,stockItemFormats:i.a.arrayOf(T.a.stockItemFormat).isRequired,isSelected:i.a.bool,searchLogParameters:i.a.object,minimize:i.a.bool,containerResponsiveClassNames:i.a.arrayOf(i.a.string),hideOnThreeColumnLayout:i.a.bool,style:i.a.object,classNames:i.a.arrayOf(i.a.string),isEnterpriseMember:i.a.bool,shouldShowAddToFavorites:i.a.bool,shouldShowDeleteButton:i.a.bool,binUniqueId:i.a.string,isInSharedFoldersBeta:i.a.bool,isFavorite:i.a.bool,page:i.a.number,isSavingFavorite:i.a.bool,context:i.a.string,stockItemCardContext:i.a.object,member:i.a.object,shouldStockItemHaveNewFlag:i.a.bool,draggableCard:i.a.bool,isCollapsedStockItemLoadMoreCard:i.a.bool,handleLoadingMoreCollapsedStockItems:i.a.func,shouldShowDownloadButton:i.a.bool,user:i.a.object,useSubscriptionlessSignUpEnticement:i.a.bool}),z(G,"defaultProps",{containerResponsiveClassNames:["col-lg-3 ","col-md-4 ","col-sm-4 ","col-xs-10 ","col-xs-offset-1 ","col-lg-offset-0 ","col-md-offset-0 ","col-sm-offset-0"],style:{},classNames:[],isSavingFavorite:!1,isCollapsedStockItemLoadMore:!1,handleCollapsedItemsLoadMore:{},draggableCard:!1,isInSharedFoldersBeta:!1,shouldShowDeleteButton:!1}),t.a=Object(s.connect)((function(e,t){var o=e.app.search,r=o.selectedStockItem,n=r.id===t.stockItem.id;return{formatSelectorVisible:!!n&&r.formatSelectorVisible,selectedFormatId:n?r.selectedFormatId:-1,signUpLink:e.details.features.signUpLink||o.features.signUpLink,plansAndPricingUpgradeInfo:e.popUps.instanceSpecificInfo.plansAndPricingUpgradeInfo,drawerIsOpen:o.drawerIsOpen,drawerSelectedItemId:o.drawerSelectedItemId,selectedSearchFilterOptions:o.selectedSearchFilterOptions,bins:e.memberBins.bins,downloadPermissions:o.features.downloadPermissions,user:e.auth,isInSharedFoldersBeta:e.memberBins.isInSharedFoldersBeta}}))(G)}).call(this,o(7))},943:function(e,t,o){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){return n(this,t),i(this,s(t).apply(this,arguments))}var o,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),o=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.downloadPermissions&&!1===this.props.downloadPermissions.fourK,t="4K"===this.props.stockItemFormats[0].quality;(e||t)&&this.selectHDOption()}},{key:"selectHDOption",value:function(){var e=this.props.stockItemFormats.find((function(e){return"HD"===e.quality}));e&&this.props.selectedFormatChanged(parseInt(e.id,10))}}])&&a(o.prototype,r),l&&a(o,l),t}(o(533).a);t.a=l},944:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var r=o(38),n=o(523),a=o(535);function i(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o,s;return t=e,s=[{key:"create",value:function(e,t,o,i,s,c){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Date.now(),u=new n.StockItemHoverEvent,p=o?l-o:0;return u.meta=r.a.meta(),u.device=r.a.device(),u.user=r.a.user(),u.searchIdentifiers=r.a.searchIdentifiers(),u.stockItem=a.a.create(e),u.hoverStart=t,u.hoverEnd=l,u.playEnd=Math.floor(i),u.timesLooped=s,u.playStart=o?Math.ceil(u.playEnd-p/1e3+s*e.duration):0,u.urls=r.a.urls(),u}}],(o=null)&&i(t.prototype,o),s&&i(t,s),e}()}}]);